<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Bridge : you &amp; me  | 科学上网</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.75.1" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.d98f2eb6bcd1eaedb7edf166bd16af26.css" rel="stylesheet">
    

    

    
      
    

    

    <meta property="og:title" content="科学上网" />
<meta property="og:description" content="相关网站  vps234（VPS购买汇总） shadowsocks主页 v2ray主页 检查IP是否能通  VPS推荐 搬瓦工没用过，vultr的话容易被ban IP。目前一直在用hostwinds，很稳定，而且hostwinds可以换IP，对于科学上网来说比较方便。
Shadowsocks[不推荐，现在不稳定] 安装python yum install python-setuptools easy_install pip firewall-cmd --zone=public --add-port=443/tcp --permanent firewall-cmd --reload 如果运行firewall-cmd命令出现Command not found的错误，则执行下列命令之后再执行上述firewall-cmd命令
yum install firewalld systemctl start firewalld 配置shadowsocks   安装shadowsocks
pip install shadowsocks vi /etc/shadowsocks.json # 以下为填写内容 { &#34;server&#34;:&#34;ip_address&#34;, &#34;server_port&#34;:443, &#34;local_port&#34;:1080, &#34;password&#34;:&#34;your_password&#34;, &#34;timeout&#34;:600, &#34;method&#34;:&#34;aes-256-cfb&#34; }   运行shadowsocks
# 使用配置文件 nohup ssserver -c /etc/shadowsocks.json &amp; &gt;/dev/null 2&gt;&amp;1 # 不使用配置文件 sudo ssserver -p {端口号} -k {密码}-m aes-256-cfb --user nobody -d start   配置BBR加速访问[可选] BBR的github地址：BBR" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://horizonnn.github.io/post/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/" />
<meta property="article:published_time" content="2020-10-05T14:02:05+08:00" />
<meta property="article:modified_time" content="2020-10-05T14:02:05+08:00" />
<meta itemprop="name" content="科学上网">
<meta itemprop="description" content="相关网站  vps234（VPS购买汇总） shadowsocks主页 v2ray主页 检查IP是否能通  VPS推荐 搬瓦工没用过，vultr的话容易被ban IP。目前一直在用hostwinds，很稳定，而且hostwinds可以换IP，对于科学上网来说比较方便。
Shadowsocks[不推荐，现在不稳定] 安装python yum install python-setuptools easy_install pip firewall-cmd --zone=public --add-port=443/tcp --permanent firewall-cmd --reload 如果运行firewall-cmd命令出现Command not found的错误，则执行下列命令之后再执行上述firewall-cmd命令
yum install firewalld systemctl start firewalld 配置shadowsocks   安装shadowsocks
pip install shadowsocks vi /etc/shadowsocks.json # 以下为填写内容 { &#34;server&#34;:&#34;ip_address&#34;, &#34;server_port&#34;:443, &#34;local_port&#34;:1080, &#34;password&#34;:&#34;your_password&#34;, &#34;timeout&#34;:600, &#34;method&#34;:&#34;aes-256-cfb&#34; }   运行shadowsocks
# 使用配置文件 nohup ssserver -c /etc/shadowsocks.json &amp; &gt;/dev/null 2&gt;&amp;1 # 不使用配置文件 sudo ssserver -p {端口号} -k {密码}-m aes-256-cfb --user nobody -d start   配置BBR加速访问[可选] BBR的github地址：BBR">
<meta itemprop="datePublished" content="2020-10-05T14:02:05+08:00" />
<meta itemprop="dateModified" content="2020-10-05T14:02:05+08:00" />
<meta itemprop="wordCount" content="252">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="科学上网"/>
<meta name="twitter:description" content="相关网站  vps234（VPS购买汇总） shadowsocks主页 v2ray主页 检查IP是否能通  VPS推荐 搬瓦工没用过，vultr的话容易被ban IP。目前一直在用hostwinds，很稳定，而且hostwinds可以换IP，对于科学上网来说比较方便。
Shadowsocks[不推荐，现在不稳定] 安装python yum install python-setuptools easy_install pip firewall-cmd --zone=public --add-port=443/tcp --permanent firewall-cmd --reload 如果运行firewall-cmd命令出现Command not found的错误，则执行下列命令之后再执行上述firewall-cmd命令
yum install firewalld systemctl start firewalld 配置shadowsocks   安装shadowsocks
pip install shadowsocks vi /etc/shadowsocks.json # 以下为填写内容 { &#34;server&#34;:&#34;ip_address&#34;, &#34;server_port&#34;:443, &#34;local_port&#34;:1080, &#34;password&#34;:&#34;your_password&#34;, &#34;timeout&#34;:600, &#34;method&#34;:&#34;aes-256-cfb&#34; }   运行shadowsocks
# 使用配置文件 nohup ssserver -c /etc/shadowsocks.json &amp; &gt;/dev/null 2&gt;&amp;1 # 不使用配置文件 sudo ssserver -p {端口号} -k {密码}-m aes-256-cfb --user nobody -d start   配置BBR加速访问[可选] BBR的github地址：BBR"/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://horizonnn.github.io/" class="f3 fw2 hover-white no-underline white-90 dib">
      Bridge : you &amp; me
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/post/" title="Posts page">
              Posts
            </a>
          </li>
          
        </ul>
      
      











    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        POSTS
      </p>
      <h1 class="f1 athelas mb1">科学上网</h1>
      
      <time class="f6 mv4 dib tracked" datetime="2020-10-05T14:02:05&#43;08:00">October 5, 2020</time>
      
      
    </header>

    <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><h1 id="相关网站">相关网站</h1>
<ol>
<li><a href="https://www.vps234.com/">vps234（VPS购买汇总）</a></li>
<li><a href="https://shadowsocks.org/en/index.html">shadowsocks主页</a></li>
<li><a href="https://www.v2ray.com/en/">v2ray主页</a></li>
<li><a href="https://www.vps234.com/ipchecker/">检查IP是否能通</a></li>
</ol>
<h1 id="vps推荐">VPS推荐</h1>
<p>搬瓦工没用过，vultr的话容易被ban IP。目前一直在用hostwinds，很稳定，而且hostwinds可以换IP，对于科学上网来说比较方便。</p>
<h1 id="shadowsocks不推荐现在不稳定">Shadowsocks[不推荐，现在不稳定]</h1>
<h3 id="安装python">安装python</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">yum install python-setuptools
easy_install pip
firewall-cmd --zone<span style="color:#f92672">=</span>public --add-port<span style="color:#f92672">=</span>443/tcp --permanent
firewall-cmd --reload
</code></pre></div><p>如果运行firewall-cmd命令出现Command not found的错误，则执行下列命令之后再执行上述firewall-cmd命令</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">yum install firewalld
systemctl start firewalld
</code></pre></div><h3 id="配置shadowsocks">配置shadowsocks</h3>
<ol>
<li>
<p>安装shadowsocks</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">pip install shadowsocks
vi <span style="color:#f92672">/</span>etc<span style="color:#f92672">/</span>shadowsocks<span style="color:#f92672">.</span>json
   
<span style="color:#75715e"># 以下为填写内容</span>
{
 <span style="color:#e6db74">&#34;server&#34;</span>:<span style="color:#e6db74">&#34;ip_address&#34;</span>,
 <span style="color:#e6db74">&#34;server_port&#34;</span>:<span style="color:#ae81ff">443</span>,
 <span style="color:#e6db74">&#34;local_port&#34;</span>:<span style="color:#ae81ff">1080</span>,
 <span style="color:#e6db74">&#34;password&#34;</span>:<span style="color:#e6db74">&#34;your_password&#34;</span>,
 <span style="color:#e6db74">&#34;timeout&#34;</span>:<span style="color:#ae81ff">600</span>,
 <span style="color:#e6db74">&#34;method&#34;</span>:<span style="color:#e6db74">&#34;aes-256-cfb&#34;</span>
}
</code></pre></div></li>
<li>
<p>运行shadowsocks</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># 使用配置文件</span>
nohup ssserver <span style="color:#f92672">-</span>c <span style="color:#f92672">/</span>etc<span style="color:#f92672">/</span>shadowsocks<span style="color:#f92672">.</span>json <span style="color:#f92672">&amp;</span> <span style="color:#f92672">&gt;/</span>dev<span style="color:#f92672">/</span>null <span style="color:#ae81ff">2</span><span style="color:#f92672">&gt;&amp;</span><span style="color:#ae81ff">1</span>
   
<span style="color:#75715e"># 不使用配置文件</span>
sudo ssserver <span style="color:#f92672">-</span>p {<span style="color:#960050;background-color:#1e0010">端口号</span>} <span style="color:#f92672">-</span>k {<span style="color:#960050;background-color:#1e0010">密码</span>}<span style="color:#f92672">-</span>m aes<span style="color:#f92672">-</span><span style="color:#ae81ff">256</span><span style="color:#f92672">-</span>cfb <span style="color:#f92672">--</span>user nobody <span style="color:#f92672">-</span>d start
</code></pre></div></li>
</ol>
<h3 id="配置bbr加速访问可选">配置BBR加速访问[可选]</h3>
<p>BBR的github地址：<a href="https://github.com/google/bbr">BBR</a></p>
<h5 id="利用elrepo-rpm库更新内核">利用ELRepo RPM库更新内核</h5>
<ol>
<li>
<p>首先看一下当前内核</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">uname -r
</code></pre></div></li>
<li>
<p>安装ELRepo repo</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org
sudo rpm -Uvh http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm
</code></pre></div></li>
<li>
<p>安装最新内核</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">sudo yum <span style="color:#f92672">--</span>enablerepo<span style="color:#f92672">=</span>elrepo<span style="color:#f92672">-</span>kernel install kernel<span style="color:#f92672">-</span>ml <span style="color:#f92672">-</span>y
</code></pre></div><p>然后确认一下</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">rpm -qa | grep kernel
</code></pre></div><p>如果安装成功，返回结果中会有一个版本号不与太一样的新内核</p>
</li>
<li>
<p>使用新内核并使grub2默认引导新内核</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo egrep ^menuentry /etc/grub2.cfg | cut -f <span style="color:#ae81ff">2</span> -d <span style="color:#ae81ff">\&#39;</span>
</code></pre></div><p>结果中也应该有新内核的显示，记住此时新内核的位置</p>
<p>然后使用grub2引导新内核，如果上述新内核位置是第一位，那这里<!-- raw HTML omitted -->的值就是0，依次类推</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo grub2-set-default &lt;index&gt; 
</code></pre></div></li>
<li>
<p>重启服务器</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo shutdown -r now
</code></pre></div><p>如果使用ssh工具登陆的，那么还是在服务器网页上手动重启服务器吧</p>
</li>
<li>
<p>重新登陆服务器后，查看内核是否更改了</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">uname -r
</code></pre></div><p>如果换成了新内核，则说明内核启用成功</p>
</li>
</ol>
<h5 id="启用bbr">启用BBR</h5>
<ol>
<li>
<p>为了启用BBR算法，首先要更改<code>sysctl</code>配置</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">echo <span style="color:#e6db74">&#39;net.core.default_qdisc=fq&#39;</span> | sudo tee -a /etc/sysctl.conf
echo <span style="color:#e6db74">&#39;net.ipv4.tcp_congestion_control=bbr&#39;</span> | sudo tee -a /etc/sysctl.conf
sudo sysctl -p
</code></pre></div></li>
<li>
<p>确认BBR能够被开启，运行如下命令</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo sysctl net.ipv4.tcp_available_congestion_control
</code></pre></div><p>输出应该如下所示</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">net.ipv4.tcp_available_congestion_control <span style="color:#f92672">=</span> bbr cubic reno
</code></pre></div></li>
<li>
<p>然后继续验证</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo sysctl -n net.ipv4.tcp_congestion_control
</code></pre></div><p>输出应该如下所示</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">bbr
</code></pre></div></li>
<li>
<p>最后，确保bbr被成功加载了</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">lsmod | grep bbr
</code></pre></div><p>输出应该类似如下输出</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">tcp_bbr                <span style="color:#ae81ff">16384</span>  <span style="color:#ae81ff">0</span>
</code></pre></div></li>
</ol>
<h5 id="测试网络性能">测试网络性能</h5>
<p>In order to test BBR&rsquo;s network performance enhancement, you can create a file in the web server directory for download, and then test the download speed from a web browser on your desktop machine.</p>
<pre><code>sudo yum install httpd -y
sudo systemctl start httpd.service
sudo firewall-cmd --zone=public --permanent --add-service=http
sudo firewall-cmd --reload
cd /var/www/html
sudo dd if=/dev/zero of=500mb.zip bs=1024k count=500
</code></pre><p>Finally, visit the URL <code>http://[your-server-IP]/500mb.zip</code> from a web browser on your desktop computer, and then evaluate download speed.</p>
<h1 id="v2ray">V2ray</h1>
<p>详见v2ray主页，之前配置的时候没有记录下来，之后再配置的时候再写一下吧。</p>
<ul class="pa0">
  
</ul>
<div class="mt6">
      
      
      </div>
    </section>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://horizonnn.github.io/" >
    &copy; 2020 Bridge : you &amp; me
  </a>
    <div>










</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
